
<td>
    {{ history.MDF[0].Last_year_MGO_ROI | number : 1 }}
</td>
<td>
    <!-- Membership type -->
    <div ng-show="reseller.partner.PartnerTypeID == 2">
        {{
          history.Membership_Type.toUpperCase()
        }}
    </div>
    <div ng-show="reseller.partner.PartnerTypeID == 1">
        -
    </div>
</td>
<td>
    <!-- Last Period Sellout -->
    {{history.Sellout[0].Last_Period_Sellout | number: 0}}
</td>
 

<td ng-class="{'gray-out': PartnerTypeID == 2}">
    <span ng-if="reseller.partner.PartnerTypeID == 1">
        {{history.Sellout[0].Sellout_Silver_Below | number: 0}}
    </span>

    <span ng-if="reseller.partner.PartnerTypeID == 2">
        N/A
    </span>

</td>
<td ng-class="{'gray-out': PartnerTypeID == 2}">

    <span ng-if="reseller.partner.PartnerTypeID == 1">
        {{history.Sellout[0].Sellout_Gold_Platinum | number: 0}}
    </span>
    <span ng-if="reseller.partner.PartnerTypeID == 2">
        N/A
    </span>
</td>
<td ng-class="{'gray-out': PartnerTypeID == 2}">
    <span ng-if="reseller.partner.PartnerTypeID == 1">
        {{history.Sellout[0].Unweighted_Sellout | number: 0}}
    </span>
    <span ng-if="reseller.partner.PartnerTypeID == 2">
        N/A
    </span>

</td>
 

<td>
    <!-- YoY -->
    {{history.Sellout[0].YoY_SO | number: 1}}%
</td>

<td>
    {{history.Sellout[0].Scaled_Sellout | number: 1}}

</td>
<td>

    {{history.Sellout[0].HOH_SO | number: 0}}%
</td>

<td>
    <!-- Projected Sellout -->
    {{history.Sellout[0].Projected_Sellout | number: 0}}
</td>
<td><!--Source of 1H18 Projected Sellout--></td>
<td>

    {{history.Sellout[0].YOY_CY_PY | number: 0}}%
</td>
<td>
    <!-- Calculated MFD -->
    {{history.MDF[0].Recommended_MDF | number: 0}}
</td>

<td>
    <!-- Alloc_PrevYear_MDF   -->
    {{history.MDF[0].Alloc_PrevY_MDF | number: 0}}
</td>

<td>
    {{ history.MDF[0].Last_year_mdf | number : 0 }}
</td>

<td>
    <div ng-show="reseller.district.DistrictID > 0">
        {{history.MSA[0].MSAValue | number : 0}}
    </div>
    <!-- cell formating -->
    <div ng-if="reseller.obj.geo.DisplayName !='North America' ">
        <input type="text"
                ng-class="{'yelow':'BU_MSA_' + buId +'_MDF_' + history.PartnerID == Varid}"
               ng-mouseover='Popover($event)'
               ng-focus="copyFromBu(histories[$index].BU_MSA)"
               class="form-control specialText right"
               ng-disabled="role.disabled || disablePrevious || NOACCESS  || isbuu"
               ng-keyup="AssignPosition()"
               onkeypress='return event.charCode >= 48 && event.charCode <= 57'
               name=""
               id="BU_MSA_{{buId}}_MDF_{{history.PartnerID}}"
               ng-model="histories[$index].BU_MSA" ng-blur="saveFromBU($index,$event,history,true,true)">
    </div>
</td>
<!-- Aruba MSA -->
<!-- cell formating -->
<td>
    <div ng-show="(reseller.district.DistrictID > 0 && (buId == 0  || buId==5)) || ((reseller.obj.countries == null ? reseller.obj.geo.DisplayName =='North America' : reseller.obj.countries[0].DisplayName=='CANADA' )&& reseller.partner.PartnerName=='Reseller' &&( buId == 0  || buId==5)) ">
        <input ng-disabled="role.disabled || disablePrevious || NOACCESS  || isbuu"
               ng-click="copyARUBAMSAValue(history.MSA[0].ArubaMsa)"
               ng-blur="saveMSA($index,'ARUBA MSA')"
               ng-keyup="AssignPosition()"
               type="text" name=""
               class="form-control msa-text specialText"
               id="businessUnit_{{buId}}_ArubaMsa_{{history.PartnerID}}"
               ng-class="{'ng-not-empty':history.MSA[0].ArubaMsa==0}"
               ng-model="history.MSA[0].ArubaMsa">
    </div>
</td>

<td>
    <!-- Alloc_PrevPeriod_MDF   -->
    {{history.MDF[0].Alloc_PrevP_MDF | number: 0}}
</td>

<td>
    <!-- Last Period MDF -->
    {{history.MDF[0].Last_Period_MDF | number: 0}}
</td>
<td>
    <!-- Allocated MDF -->
    <div class="row">
        <div class="col-lg-12">
            <input type="text"
                    ng-class="{'yelow':'businessUnit_' + buId +'_MDF_' + history.PartnerID == Varid}"
                    ng-mouseover='Popover($event)'
                   ng-focus="copyFromBu(history.TotalMDF)"
                   class="form-control specialText right"
                   ng-disabled="role.disabled || disablePrevious || NOACCESS  || isbuu"
                   ng-keyup="AssignPosition()"
                   onkeypress='return event.charCode >= 48 && event.charCode <= 57'
                   name=""
                   id="businessUnit_{{buId}}_MDF_{{history.PartnerID}}"
                   ng-model="history.TotalMDF" ng-blur="saveFromBU($index,$event,history,true,false)">
        </div>
     </div>
 </td>
<td>
    <!-- Total MDF -->
    {{histories[$index].MDF[0].BaseLineMDF | number: 0}} 
</td>
<!-- CarveOut -->
<td>
    <div ng-if="reseller.obj.geo.DisplayName !='North America' ">
        <div class="row">
            <div class="col-lg-12">
                <input type="text"
                        ng-class="{'yelow':'CarveOut_' + buId +'_MDF_' + history.PartnerID == Varid}"
                        ng-mouseover='Popover($event)'
                        ng-focus="copyFromBu(histories[$index].CarveOut)"
                       class="form-control specialText right"
                       ng-disabled="role.disabled || disablePrevious || NOACCESS  || isbuu"
                       ng-keyup="AssignPosition()"
                       onkeypress='return event.charCode >= 48 && event.charCode <= 57'
                       name=""
                       id="CarveOut_{{buId}}_MDF_{{history.PartnerID}}"
                       ng-model="histories[$index].CarveOut" ng-blur="saveFromBU($index,$event,history,true,true)">
            </div>
         </div>
        </div>

</td>
<td class="businessUnit_{{buId}}">

    <div class="row">
        <div class="col-lg-8">
            <div class="dropdown">

                <!--  -->
                <select ng-disabled="role.disabled || disablePrevious || NOACCESS  || isbuu"
                        id="reason_{{$index}}"
                        class="form-control"
                         ng-click="event = $event"
                        ng-options="item as item.Reason for item in reason track by item.MDFVarianceReasonID"
                        ng-model="histories[$index].MDF[0].MDFVarianceReasonID" ng-change="saveFromBU($index,event,history,false,false)"></select>
            </div>
            <img ng-if="history.MDF[0].Comments.length > 0" ng-hide="isbuu"
                 src="assets/resources/comment@1x.png"
                 ng-click="clickDD(histories[$index],$index,$event,false)"
                 ng-class="{'disable-point': isbuu, 'enable-point': !isbuu }"
                 class="comment-btn" 
                 />

            <img ng-if="history.MDF[0].Comments.length == 0 || !history.MDF[0].Comment" ng-hide="isbuu"
                 src="assets/resources/comment_grey@1x.png"
                 ng-click="clickDD(histories[$index],$index,$event,false)"
                 ng-class="{'disable-point': isbuu, 'enable-point': !isbuu }"
                 class="comment-btn" />
        </div>
        <div class="comment-button">

            <div class="dropdown">
                <span data-toggle="dropdown"
                      class="dropdown-toggle">
                </span>

                <div class="dropdown-menu comment-box" style="position: inherit;">

                    <div class="form-group">
                        <label for="exampleInputEmail1" class="lbl-comment"></label>
                        <textarea ng-disabled="role.disabled || disablePrevious || NOACCESS  || isbuu" class="form-control coment-box-textarea" ng-model="histories[$index].MDF[0].Comments"></textarea>
                    </div>
                    <button type="submit" class="btn btn-default pull-right x-button">Close</button>
                    <button ng-disabled="role.disabled || disablePrevious || NOACCESS " ng-click="saveFromBU($index,$event,history,false,false)" class="btn btn-success pull-right">Add Comment</button>
                </div>
            </div>


        </div>
    </div>
</td>
<td> {{history.MDF[0].MDF_CY_PYD | number: 1}}</td>

<td>
    <!-- YoY Change -->
    {{history.MDF[0].YoY_change_MDF | number: 1}}%
</td>
<td> {{history.MDF[0].HOH_CP_PP | number: 1}}%</td>

<td>
    <!-- Last Period MDF/ Sellout -->
    {{ history.MDFOrSellout[0].LastYearMDFOrSellout | number: 1 }}%
</td>

<td>{{history.MDFOrSellout[0].PMf_PSt }}%</td>

<td>
    <!-- Projected MDF/Sellout -->
    {{ history.MDFOrSellout[0].ProjectedMDFOrSellout | number: 1 }}%
</td>

<td>
    {{ history.MDFOrSellout[0].MedianAvdMDFOrSellout | number: 1 }}%
</td>

<td>
    {{ history.MDFOrSellout[0].ProductivityImprovementPer | number: 1 }}%
</td>

<td>{{ history.SOW | number : 1 }}%</td> <!--  -->

<td>
    <!-- WMGO Ratio -->
    {{history.MDF[0].MGO_Ratio | number: 1}}
</td>


<td>
    {{ history.MDF[0].Last_year_MGO | number : 0 }}
</td>

<td>
    {{ history.MDF[0].Last_year_Won_MGO | number : 0 }}
</td>

<td>
    {{ history.MDF[0].Last_year_Won_MGO_ROI | number : 1 }}
</td>

<td>
    {{ history.Country }}
</td>
<td>
    <!-- Projected Accuracy -->
    {{history.MDF[0].PredictionAccuracy | decorateToNaStr }}
</td>

<td>

    {{ history.Sellout[0].ProjectionMethod | decorateToNaStr}}

</td>
 
<td>
    <!-- Assesment -->
    <!-- ************** FIRST ROW ******************** -->
    <!-- Misaligned &&  Overfunded -->
    <img ng-if="history.MDF[0].MDF_Alignment == 'Misaligned' && history.MDF[0].PREV_MDF_Assessment == 'Overfunded' "
         src="assets/resources/arrow_down_red@1x.png">

    <!-- Misaligned &&  Underfunded -->
    <img ng-if="history.MDF[0].MDF_Alignment == 'Misaligned' && history.MDF[0].PREV_MDF_Assessment == 'Underfunded' "
         src="assets/resources/arrow_up_yellow@1x.png">

    <!-- Misaligned and New Opportunity -->
    <!-- No Icon -->
    <!-- Misaligned and null -->
    <img ng-if="history.MDF[0].MDF_Alignment == 'Misaligned' && (history.MDF[0].PREV_MDF_Assessment == '' || history.MDF[0].PREV_MDF_Assessment == null ) "
         src="assets/resources/verify_magnitude@1x.png">

    <!-- ************** End of FIRST ROW ******************** -->
    <!-- ************** Second ROW ******************** -->
    <!-- Aligned &&  Overfunded -->
    <img ng-if="history.MDF[0].MDF_Alignment == 'Aligned' && history.MDF[0].PREV_MDF_Assessment == 'Overfunded' "
         src="assets/resources/verify_magnitude@1x.png">

    <!-- Aligned &&  Underfunded -->
    <img ng-if="history.MDF[0].MDF_Alignment == 'Aligned' && history.MDF[0].PREV_MDF_Assessment == 'Underfunded' "
         src="assets/resources/verify_magnitude@1x.png">

    <!-- Aligned and New Opportunity -->
    <!-- No Icon -->
    <!-- Aligned and null -->
    <!-- No Icon -->
    <!-- ************** End of Second ROW ******************** -->
    <!-- ************** Third ROW ******************** -->
    <!-- null &&  Overfunded -->
    <!-- No Icon -->
    <!-- null &&  Underfunded -->
    <!-- No Icon -->
    <!-- null and New Opportunity -->
    <img ng-if="history.MDF[0].MDF_Alignment == '' && history.MDF[0].PREV_MDF_Assessment == 'New Opportunity' "
         src="assets/resources/new_opportunity@1x.png">

    <!-- null and null -->
    <!-- No Icon -->
    <!-- ************** End of Third ROW ******************** -->
</td>
 
<td>{{ history.PlannedSales | number : 0 }}</td>
<td>{{ history.targetAchievement | decorateToPer }}</td>
<!-- HSM-947 -->
<td>
    {{histories[$index].HQ}}
</td>
<td>
    {{histories[$index].Value_Perc}}
</td>





